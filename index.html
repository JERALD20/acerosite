<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Watch2Earn - Earn money by watching ads with daily returns on your deposits">
    <meta name="keywords" content="watch2earn, earn money, online earning, ads, investment">
    <title>Watch2Earn 2025 | Earn by Watching Ads</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4CAF50;
            --primary-dark: #2E7D32;
            --primary-light: #81C784;
            --secondary-color: #2196F3;
            --danger-color: #f44336;
            --warning-color: #FFA000;
            --info-color: #00BCD4;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #333;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-hover: 0 6px 12px rgba(0,0,0,0.15);
            --transition: all 0.3s ease;
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --glamping-color: #9c27b0;
            --glamping-dark: #7b1fa2;
            --glamping-light: #ba68c8;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--light-gray);
            color: var(--dark-gray);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        h1, h2, h3 {
            color: var(--dark-gray);
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        button {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 12px 20px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: 'Poppins', sans-serif;
        }
        
        button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        button.danger {
            background: var(--danger-color);
        }
        
        button.danger:hover {
            background: #d32f2f;
        }
        
        button.warning {
            background: var(--warning-color);
        }
        
        button.warning:hover {
            background: #FF8F00;
        }
        
        button.info {
            background: var(--info-color);
        }
        
        button.info:hover {
            background: #0097A7;
        }
        
        button.secondary {
            background: var(--secondary-color);
        }
        
        button.secondary:hover {
            background: #1976D2;
        }
        
        button.glamping {
            background: var(--glamping-color);
        }
        
        button.glamping:hover {
            background: var(--glamping-dark);
        }
        
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            opacity: 0.7;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin: 8px 0 15px;
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius-sm);
            font-size: 16px;
            transition: var(--transition);
            font-family: 'Poppins', sans-serif;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }
        
        .hidden {
            display: none;
        }
        
        #videoAd {
            width: 100%;
            height: 315px;
            background: #000;
            margin-bottom: 15px;
            border-radius: var(--border-radius-sm);
            overflow: hidden;
            position: relative;
        }
        
        #youtubePlayer {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        #progressBar {
            height: 8px;
            background: var(--medium-gray);
            margin-bottom: 15px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        #progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark));
            width: 0%;
            transition: width 0.3s linear;
        }
        
        .transaction {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--medium-gray);
            align-items: center;
        }
        
        .transaction:last-child {
            border-bottom: none;
        }
        
        .transaction-info {
            flex: 1;
        }
        
        .transaction-date {
            font-size: 0.8rem;
            color: #777;
            margin-top: 4px;
        }
        
        .positive { color: var(--primary-color); font-weight: bold; }
        .negative { color: var(--danger-color); font-weight: bold; }
        .pending { color: var(--warning-color); }
        .expired { color: gray; text-decoration: line-through; }
        .glamping-text { color: var(--glamping-color); font-weight: bold; }
        
        .wallet-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .wallet-item {
            background: rgba(76, 175, 80, 0.1);
            padding: 15px;
            border-radius: var(--border-radius-sm);
            text-align: center;
            transition: var(--transition);
        }
        
        .wallet-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .wallet-item h3 {
            margin: 0;
            font-size: 1rem;
            color: var(--primary-dark);
        }
        
        .wallet-item p {
            margin: 8px 0 0;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .nav-buttons button {
            padding: 10px;
            font-size: 0.9rem;
            justify-content: center;
        }
        
        .badge {
            background: var(--primary-color);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            display: inline-block;
        }
        
        .badge.certified {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        }
        
        .badge.pending {
            background: var(--warning-color);
        }
        
        .badge.success {
            background: var(--primary-color);
        }
        
        .badge.danger {
            background: var(--danger-color);
        }
        
        .badge.info {
            background: var(--info-color);
        }
        
        .badge.glamping {
            background: linear-gradient(135deg, var(--glamping-color), var(--glamping-dark));
        }
        
        .ad-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--medium-gray);
        }
        
        .ad-progress {
            flex: 1;
            height: 8px;
            background: var(--medium-gray);
            border-radius: 4px;
            margin: 0 10px;
            overflow: hidden;
        }
        
        .ad-progress-fill {
            height: 100%;
            background: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .ad-rewards {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-gray);
            color: #fff;
            text-align: center;
            border-radius: var(--border-radius-sm);
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .logo-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }
        
        .ad-container {
            position: relative;
        }
        
        .ad-timer {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            z-index: 2;
        }
        
        .alert {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: var(--border-radius-sm);
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: fadeIn 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-warning {
            background-color: var(--warning-color);
        }
        
        .alert-success {
            background-color: var(--primary-color);
        }
        
        .alert-danger {
            background-color: var(--danger-color);
        }
        
        .alert-info {
            background-color: var(--info-color);
        }
        
        .alert-glamping {
            background-color: var(--glamping-color);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translateX(-50%) translateY(0); }
            to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
        
        .payment-proof {
            margin: 15px 0;
            border: 1px dashed var(--medium-gray);
            padding: 10px;
            border-radius: var(--border-radius-sm);
            text-align: center;
        }
        
        .payment-proof img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .reset-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--medium-gray);
        }
        
        /* Profile Section Styles */
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-avatar-upload {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.5);
            color: white;
            text-align: center;
            padding: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            display: none;
        }
        
        .profile-avatar:hover .profile-avatar-upload {
            display: block;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-name {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .profile-username {
            color: #666;
            margin: 5px 0;
        }
        
        .profile-meta {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .profile-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .profile-stat {
            background: rgba(76, 175, 80, 0.1);
            padding: 15px;
            border-radius: var(--border-radius-sm);
            text-align: center;
            transition: var(--transition);
        }
        
        .profile-stat:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .profile-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .profile-stat-label {
            font-size: 0.8rem;
            color: #666;
        }
        
        .profile-section {
            margin-bottom: 20px;
        }
        
        .profile-section-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .profile-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .profile-detail {
            margin-bottom: 10px;
        }
        
        .profile-detail-label {
            font-weight: bold;
            color: #555;
            font-size: 0.9rem;
        }
        
        .profile-detail-value {
            font-size: 1rem;
        }
        
        .security-settings {
            margin-top: 20px;
        }
        
        .security-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .security-item:last-child {
            border-bottom: none;
        }
        
        .security-item-info {
            flex: 1;
        }
        
        .security-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .security-item-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 500px;
            animation: modalFadeIn 0.3s;
            position: relative;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .modal-title {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .close-modal {
            color: #aaa;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .close-modal:hover {
            color: #333;
            transform: rotate(90deg);
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Footer Styles */
        .footer {
            text-align: center;
            margin-top: auto;
            padding: 25px 15px 15px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid var(--medium-gray);
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .footer-link {
            color: var(--primary-color);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .footer-link:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }
        
        .footer-social {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .social-icon {
            color: var(--primary-color);
            font-size: 1.5rem;
            transition: var(--transition);
        }
        
        .social-icon:hover {
            color: var(--primary-dark);
            transform: translateY(-3px);
        }
        
        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Password Strength Meter */
        .password-strength {
            height: 5px;
            background: var(--medium-gray);
            margin: -10px 0 15px;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .password-strength-fill {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Password container with toggle */
        .password-container {
            position: relative;
        }
        
        .password-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #777;
        }
        
        /* Admin Panel Styles */
        .admin-panel {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .admin-panel h3 {
            color: var(--dark-gray);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .admin-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .verification-code-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .verification-code-container input {
            flex: 1;
        }
        
        .verification-code-container button {
            min-width: 100px;
        }
        
        .user-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--medium-gray);
            border-radius: var(--border-radius-sm);
        }
        
        .user-item {
            padding: 10px 15px;
            border-bottom: 1px solid var(--medium-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .user-item:last-child {
            border-bottom: none;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-actions {
            display: flex;
            gap: 5px;
        }
        
        /* Account Verification Section */
        .verification-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--medium-gray);
        }
        
        .verification-form {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .verification-form input {
            flex: 1;
            margin: 0;
        }
        
        .verification-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        /* Glamping Section Styles */
        .glamping-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        .glamping-option {
            background: rgba(156, 39, 176, 0.1);
            padding: 15px;
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--glamping-light);
            transition: var(--transition);
        }
        
        .glamping-option:hover {
            background: rgba(156, 39, 176, 0.2);
            transform: translateY(-2px);
        }
        
        .glamping-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .glamping-title {
            font-weight: bold;
            color: var(--glamping-color);
        }
        
        .glamping-reward {
            font-weight: bold;
            color: var(--glamping-dark);
        }
        
        .glamping-description {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 10px;
        }
        
        .glamping-result {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            display: none;
        }
        
        .glamping-win {
            color: var(--primary-color);
        }
        
        .glamping-lose {
            color: var(--danger-color);
        }
        
        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .wallet-summary {
                grid-template-columns: 1fr 1fr;
            }
            
            .nav-buttons {
                grid-template-columns: 1fr 1fr;
            }
            
            .nav-buttons button {
                font-size: 0.8rem;
            }
            
            .profile-details {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 15px;
            }
            
            .card {
                padding: 15px;
            }
            
            #videoAd {
                height: 200px;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-meta {
                justify-content: center;
            }
            
            .modal-content {
                margin: 20% auto;
                width: 95%;
                padding: 15px;
            }
            
            .footer-links {
                flex-direction: column;
                gap: 10px;
            }
            
            .admin-controls {
                flex-direction: column;
            }
            
            .verification-code-container {
                flex-direction: column;
            }
            
            .verification-form {
                flex-direction: column;
            }
        }
        
        /* Dark Mode Toggle */
        .dark-mode-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 999;
            transition: var(--transition);
        }
        
        .dark-mode-toggle:hover {
            transform: scale(1.1);
        }
        
        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }
        
        body.dark-mode .card {
            background-color: #1e1e1e;
            color: #e0e0e0;
        }
        
        body.dark-mode input,
        body.dark-mode select,
        body.dark-mode textarea {
            background-color: #2d2d2d;
            color: #e0e0e0;
            border-color: #444;
        }
        
        body.dark-mode .wallet-item,
        body.dark-mode .profile-stat {
            background-color: rgba(76, 175, 80, 0.2);
        }
        
        body.dark-mode .transaction {
            border-bottom-color: #444;
        }
        
        body.dark-mode .modal-content {
            background-color: #1e1e1e;
            color: #e0e0e0;
        }
        
        body.dark-mode .profile-section-title,
        body.dark-mode .card-header {
            border-bottom-color: #444;
        }
        
        body.dark-mode .security-item {
            border-bottom-color: #444;
        }
        
        body.dark-mode .footer {
            border-top-color: #444;
        }
        
        body.dark-mode .admin-panel {
            background-color: #1e1e1e;
            border-color: #444;
        }
        
        body.dark-mode .user-list {
            border-color: #444;
        }
        
        body.dark-mode .user-item {
            border-bottom-color: #444;
        }
        
        body.dark-mode .glamping-option {
            background-color: rgba(156, 39, 176, 0.2);
            border-color: var(--glamping-dark);
        }
        
        body.dark-mode .glamping-description {
            color: #aaa;
        }
    </style>
</head>
<body>
    <div class="logo">
        <i class="fas fa-play-circle logo-icon"></i>
        <h1>Watch2Earn 2025 <span class="badge certified">CERTIFIED</span></h1>
    </div>
    
    <!-- Login Section -->
    <div id="loginSection" class="card">
        <div class="card-header">
            <h2><i class="fas fa-sign-in-alt"></i> Login</h2>
        </div>
        <input type="text" id="loginUsername" placeholder="Username" required>
        <div class="password-container">
            <input type="password" id="loginPassword" placeholder="Password" required>
            <i class="fas fa-eye password-toggle" onclick="togglePassword('loginPassword')"></i>
        </div>
        <button onclick="login()"><i class="fas fa-sign-in-alt"></i> Login</button>
        <p>Don't have an account? <a href="#" onclick="showRegister()">Register</a></p>
        <p><a href="#" onclick="showForgotPassword()">Forgot password?</a></p>
        <p><a href="#" onclick="showAdminLogin()">Admin Login</a></p>
    </div>
    
    <!-- Admin Login Section -->
    <div id="adminLoginSection" class="card hidden">
        <div class="card-header">
            <h2><i class="fas fa-user-shield"></i> Admin Login</h2>
        </div>
        <div class="password-container">
            <input type="password" id="adminPassword" placeholder="Admin Password" required>
            <i class="fas fa-eye password-toggle" onclick="togglePassword('adminPassword')"></i>
        </div>
        <button onclick="adminLogin()"><i class="fas fa-sign-in-alt"></i> Login as Admin</button>
        <p><a href="#" onclick="showLogin()">Back to user login</a></p>
    </div>
    
    <!-- Register Section -->
    <div id="registerSection" class="card hidden">
        <div class="card-header">
            <h2><i class="fas fa-user-plus"></i> Register</h2>
        </div>
        <input type="text" id="registerUsername" placeholder="Username" required minlength="4">
        <div class="password-container">
            <input type="password" id="registerPassword" placeholder="Password" required minlength="6" oninput="checkPasswordStrength()">
            <i class="fas fa-eye password-toggle" onclick="togglePassword('registerPassword')"></i>
        </div>
        <div class="password-strength">
            <div class="password-strength-fill" id="passwordStrengthFill"></div>
        </div>
        <input type="password" id="registerConfirmPassword" placeholder="Confirm Password" required minlength="6">
        <input type="email" id="registerEmail" placeholder="Email (optional for account recovery)">
        <button onclick="register()"><i class="fas fa-user-plus"></i> Register</button>
        <p>Already have an account? <a href="#" onclick="showLogin()">Login</a></p>
    </div>
    
    <!-- Forgot Password Section -->
    <div id="forgotPasswordSection" class="card hidden">
        <div class="card-header">
            <h2><i class="fas fa-key"></i> Reset Password</h2>
        </div>
        <p>Enter your username to receive password reset instructions:</p>
        <input type="text" id="forgotUsername" placeholder="Username" required>
        <button onclick="sendPasswordReset()"><i class="fas fa-paper-plane"></i> Send Reset Link</button>
        <p><a href="#" onclick="showLogin()">Back to login</a></p>
    </div>
    
    <!-- Main App -->
    <div id="app" class="hidden">
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-wallet"></i> My Wallet</h2>
                <span class="badge success">Active</span>
            </div>
            <div class="wallet-summary">
                <div class="wallet-item">
                    <h3>Total Deposit</h3>
                    <p id="totalDeposit">₱0</p>
                </div>
                <div class="wallet-item">
                    <h3>Active Deposits</h3>
                    <p id="activeDeposits">₱0</p>
                </div>
                <div class="wallet-item">
                    <h3>Total Income</h3>
                    <p id="totalIncome">₱0</p>
                </div>
                <div class="wallet-item">
                    <h3>Available</h3>
                    <p id="availableBalance">₱0</p>
                </div>
            </div>
        </div>
        
        <!-- Earn Tab -->
        <div id="earnTab" class="card">
            <div class="card-header">
                <h2><i class="fas fa-ad"></i> Watch Ads to Earn</h2>
                <span class="badge info" id="dailyStatus">Day 1/365</span>
            </div>
            <div class="ad-container">
                <div id="videoAd">
                    <iframe id="youtubePlayer" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    <div class="ad-timer hidden">30s</div>
                </div>
                <div id="progressBar"><div id="progress"></div></div>
            </div>
            <button id="watchBtn" onclick="startAd()"><i class="fas fa-eye"></i> Watch Ad (30s)</button>
            
            <div class="ad-counter">
                <span>Ads today: <span id="adsWatched">0</span>/10</span>
                <div class="ad-progress">
                    <div class="ad-progress-fill" id="adProgressFill"></div>
                </div>
                <span class="ad-rewards"><i class="fas fa-coins"></i> <span id="todayEarnings">₱0</span></span>
            </div>
            
            <p class="tooltip" style="text-align: center; margin-top: 15px;">
                <i class="fas fa-info-circle"></i> How it works?
                <span class="tooltiptext">Earn 10% daily of your active deposits by watching 10 ads per day. Each ad takes 30 seconds.</span>
            </p>
        </div>
        
        <!-- Glamping Tab -->
        <div id="glampingTab" class="card hidden">
            <div class="card-header">
                <h2><i class="fas fa-gem"></i> Glamping Rewards</h2>
                <span class="badge glamping">HIGH REWARDS</span>
            </div>
            
            <p>Try your luck with our premium Glamping rewards! Higher rewards but higher risk.</p>
            
            <div class="glamping-container">
                <div class="glamping-option">
                    <div class="glamping-header">
                        <div class="glamping-title">Mini Glamping</div>
                        <div class="glamping-reward">Reward: 3x</div>
                    </div>
                    <div class="glamping-description">
                        Bet ₱50 to potentially win ₱150. A great way to start!
                    </div>
                    <button class="glamping" onclick="playGlamping(50, 3)"><i class="fas fa-dice"></i> Play Mini Glamping</button>
                    <div class="glamping-result" id="miniGlampingResult"></div>
                </div>
                
                <div class="glamping-option">
                    <div class="glamping-header">
                        <div class="glamping-title">Basic Glamping</div>
                        <div class="glamping-reward">Reward: 2x</div>
                    </div>
                    <div class="glamping-description">
                        Bet ₱100 to potentially win ₱200. A great way to double your money!
                    </div>
                    <button class="glamping" onclick="playGlamping(100, 2)"><i class="fas fa-dice"></i> Play Basic Glamping</button>
                    <div class="glamping-result" id="basicGlampingResult"></div>
                </div>
                
                <div class="glamping-option">
                    <div class="glamping-header">
                        <div class="glamping-title">Premium Glamping</div>
                        <div class="glamping-reward">Reward: 5x</div>
                    </div>
                    <div class="glamping-description">
                        Bet ₱500 to potentially win ₱2,500. High risk, high reward!
                    </div>
                    <button class="glamping" onclick="playGlamping(500, 5)"><i class="fas fa-gem"></i> Play Premium Glamping</button>
                    <div class="glamping-result" id="premiumGlampingResult"></div>
                </div>
                
                <div class="glamping-option">
                    <div class="glamping-header">
                        <div class="glamping-title">VIP Glamping</div>
                        <div class="glamping-reward">Reward: 10x</div>
                    </div>
                    <div class="glamping-description">
                        Bet ₱1,000 to potentially win ₱10,000. Only for the boldest players!
                    </div>
                    <button class="glamping" onclick="playGlamping(1000, 10)"><i class="fas fa-crown"></i> Play VIP Glamping</button>
                    <div class="glamping-result" id="vipGlampingResult"></div>
                </div>
                
                <div class="glamping-option">
                    <div class="glamping-header">
                        <div class="glamping-title">Mega Glamping</div>
                        <div class="glamping-reward">Reward: 20x</div>
                    </div>
                    <div class="glamping-description">
                        Bet ₱5,000 to potentially win ₱100,000. The ultimate challenge!
                    </div>
                    <button class="glamping" onclick="playGlamping(5000, 20)"><i class="fas fa-trophy"></i> Play Mega Glamping</button>
                    <div class="glamping-result" id="megaGlampingResult"></div>
                </div>
            </div>
            
            <p class="tooltip" style="text-align: center; margin-top: 15px;">
                <i class="fas fa-info-circle"></i> About Glamping
                <span class="tooltiptext">Glamping offers higher rewards than regular ads but comes with higher risk. Play responsibly.</span>
            </p>
        </div>
        
        <!-- Deposit Tab -->
        <div id="depositTab" class="card hidden">
            <div class="card-header">
                <h2><i class="fas fa-money-bill-wave"></i> Make Deposit</h2>
            </div>
            <p><strong>Min: ₱50 | Max: ₱100,000</strong></p>
            <p>Earn 10% daily for 365 days on your deposit</p>
            <input type="number" id="depositAmount" placeholder="Amount" min="50" max="100000" required>
            
            <div class="payment-proof">
                <label for="paymentProof">Upload Payment Proof (Screenshot)</label>
                <input type="file" id="paymentProof" accept="image/*" required>
                <div id="proofPreview"></div>
            </div>
            
            <p>Send to GCash: <strong>09978014222</strong> (JE***D A.)</p>
            <p>After sending, submit the amount and proof here to activate your deposit.</p>
            <button onclick="submitDeposit()"><i class="fas fa-paper-plane"></i> Submit Deposit</button>
        </div>
        
        <!-- Withdraw Tab -->
        <div id="withdrawTab" class="card hidden">
            <div class="card-header">
                <h2><i class="fas fa-hand-holding-usd"></i> Withdraw Funds</h2>
            </div>
            <p><strong>Min: ₱50 (10% fee)</strong></p>
            <input type="number" id="withdrawAmount" placeholder="Amount" min="50" required>
            <p>After fee: <span id="afterFee">₱0</span></p>
            <input type="text" id="gcashNumber" placeholder="GCash Number" pattern="[0-9]{11}" title="11-digit GCash number" required>
            <input type="text" id="gcashName" placeholder="Account Name" required>
            <button onclick="submitWithdrawal()"><i class="fas fa-money-bill-wave"></i> Request Withdrawal</button>
            <p class="tooltip" style="margin-top: 15px;">
                <i class="fas fa-info-circle"></i> Withdrawal processing
                <span class="tooltiptext">Withdrawals are automatically processed within 20 minutes. Make sure your GCash details are correct.</span>
            </p>
        </div>
        
        <!-- History Tab -->
        <div id="historyTab" class="card hidden">
            <div class="card-header">
                <h2><i class="fas fa-history"></i> Transaction History</h2>
                <div class="filter-options">
                    <select id="historyFilter" onchange="loadTransactions()">
                        <option value="all">All</option>
                        <option value="deposit">Deposits</option>
                        <option value="withdrawal">Withdrawals</option>
                        <option value="income">Earnings</option>
                        <option value="glamping">Glamping</option>
                    </select>
                </div>
            </div>
            <div id="transactions"></div>
        </div>
        
        <!-- Profile Tab -->
        <div id="profileTab" class="card hidden">
            <div class="card-header">
                <h2><i class="fas fa-user-circle"></i> My Profile</h2>
            </div>
            
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">
                    <!-- Initial will be inserted here -->
                    <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
                    <div class="profile-avatar-upload" onclick="document.getElementById('avatarUpload').click()">Change Photo</div>
                </div>
                <div class="profile-info">
                    <h3 class="profile-name" id="profileName">Loading...</h3>
                    <div class="profile-username" id="profileUsername">@username</div>
                    <div class="profile-meta">
                        <div class="profile-meta-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span id="memberSince">Member since: Loading...</span>
                        </div>
                        <div class="profile-meta-item">
                            <i class="fas fa-id-card"></i>
                            <span id="userId">ID: Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-stats">
                <div class="profile-stat">
                    <div class="profile-stat-value" id="totalAdsWatched">0</div>
                    <div class="profile-stat-label">Total Ads Watched</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="totalDaysActive">0</div>
                    <div class="profile-stat-label">Days Active</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="accountLevel">1</div>
                    <div class="profile-stat-label">Account Level</div>
                </div>
            </div>
            
            <div class="profile-section">
                <h3 class="profile-section-title"><i class="fas fa-info-circle"></i> Account Details</h3>
                <div class="profile-details">
                    <div class="profile-detail">
                        <div class="profile-detail-label">Username</div>
                        <div class="profile-detail-value" id="detailUsername">Loading...</div>
                    </div>
                    <div class="profile-detail">
                        <div class="profile-detail-label">Email</div>
                        <div class="profile-detail-value" id="detailEmail">Not set</div>
                    </div>
                    <div class="profile-detail">
                        <div class="profile-detail-label">Last Login</div>
                        <div class="profile-detail-value" id="detailLastLogin">Loading...</span></div>
                    </div>
                    <div class="profile-detail">
                        <div class="profile-detail-label">Account Status</div>
                        <div class="profile-detail-value"><span class="badge certified" id="detailStatus">Active</span></div>
                    </div>
                </div>
            </div>
            
            <!-- Account Verification Section -->
            <div class="profile-section">
                <h3 class="profile-section-title"><i class="fas fa-check-circle"></i> Account Verification</h3>
                <div id="verificationStatusMessage">
                    <p>To verify your account, please contact support first at <a href="https://www.facebook.com/profile.php?id=61578004253422" target="_blank">Facebook Support</a> to notify them about your pending verification. Then enter the verification code provided by support.</p>
                </div>
                
                <div class="verification-form">
                    <input type="text" id="userVerificationCode" placeholder="Enter the code" maxlength="6">
                    <button onclick="verifyUserAccount()" class="secondary"><i class="fas fa-check"></i> Verify Account</button>
                </div>
                
                <div class="verification-status" id="verificationStatusDisplay">
                    <span id="verificationStatusText">Status: Not verified</span>
                    <span class="badge pending" id="verificationStatusBadge">Pending</span>
                </div>
            </div>
            
            <div class="profile-section">
                <h3 class="profile-section-title"><i class="fas fa-shield-alt"></i> Security</h3>
                
                <div class="security-settings">
                    <div class="security-item">
                        <div class="security-item-info">
                            <div class="security-item-title">Password</div>
                            <div class="security-item-desc">Last changed: <span id="passwordLastChanged">Never</span></div>
                        </div>
                        <button onclick="showChangePasswordModal()" class="info"><i class="fas fa-key"></i> Change</button>
                    </div>
                    <div class="security-item">
                        <div class="security-item-info">
                            <div class="security-item-title">Email Verification</div>
                            <div class="security-item-desc"><span id="emailVerificationStatus">Not verified</span></div>
                        </div>
                        <button onclick="verifyEmail()" class="info" id="verifyEmailBtn"><i class="fas fa-envelope"></i> Verify</button>
                    </div>
                    <div class="security-item">
                        <div class="security-item-info">
                            <div class="security-item-title">Two-Factor Authentication</div>
                            <div class="security-item-desc">Add an extra layer of security</div>
                        </div>
                        <button onclick="toggleTwoFactorAuth()" class="info" id="twoFactorBtn"><i class="fas fa-mobile-alt"></i> Enable</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Admin Panel (only visible to admin) -->
        <div id="adminPanel" class="card hidden">
            <div class="card-header">
                <h2><i class="fas fa-user-shield"></i> Admin Panel</h2>
                <span class="badge danger">ADMIN</span>
            </div>
            
            <div class="admin-panel">
                <h3>Account Verification</h3>
                <div class="verification-code-container">
                    <input type="text" id="verificationCodeInput" placeholder="Verification code">
                    <button onclick="generateVerificationCode()" class="secondary"><i class="fas fa-key"></i> Generate Code</button>
                    <button onclick="copyVerificationCode()" class="info"><i class="fas fa-copy"></i> Copy</button>
                </div>
                <button onclick="verifyPendingAccount()" class="success"><i class="fas fa-check-circle"></i> Verify Account</button>
                
                <h3 style="margin-top: 20px;">Pending Accounts</h3>
                <div class="user-list" id="pendingAccountsList">
                    <!-- Pending accounts will be listed here -->
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="card">
            <div class="nav-buttons">
                <button onclick="showTab('earnTab')"><i class="fas fa-ad"></i> Earn</button>
                <button onclick="showTab('glampingTab')"><i class="fas fa-gem"></i> Glamping</button>
                <button onclick="showTab('depositTab')"><i class="fas fa-money-bill-wave"></i> Deposit</button>
                <button onclick="showTab('withdrawTab')"><i class="fas fa-hand-holding-usd"></i> Withdraw</button>
                <button onclick="showTab('historyTab')"><i class="fas fa-history"></i> History</button>
                <button onclick="showTab('profileTab')"><i class="fas fa-user"></i> Profile</button>
                <button id="adminTabBtn" class="hidden danger" onclick="showTab('adminPanel')"><i class="fas fa-user-shield"></i> Admin</button>
            </div>
        </div>
        
        <div class="reset-section">
            <button onclick="confirmReset()" class="danger"><i class="fas fa-trash-alt"></i> Reset All Data</button>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-key"></i> Change Password</h3>
                <span class="close-modal" onclick="closeModal('changePasswordModal')">&times;</span>
            </div>
            <div class="password-container">
                <input type="password" id="currentPassword" placeholder="Current Password" required>
                <i class="fas fa-eye password-toggle" onclick="togglePassword('currentPassword')"></i>
            </div>
            <div class="password-container">
                <input type="password" id="newPassword" placeholder="New Password (min 6 characters)" required minlength="6" oninput="checkPasswordStrength('new')">
                <i class="fas fa-eye password-toggle" onclick="togglePassword('newPassword')"></i>
            </div>
            <div class="password-strength">
                <div class="password-strength-fill" id="newPasswordStrengthFill"></div>
            </div>
            <div class="password-container">
                <input type="password" id="confirmPassword" placeholder="Confirm New Password" required minlength="6">
                <i class="fas fa-eye password-toggle" onclick="togglePassword('confirmPassword')"></i>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('changePasswordModal')" class="danger"><i class="fas fa-times"></i> Cancel</button>
                <button onclick="saveNewPassword()"><i class="fas fa-save"></i> Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Email Verification Modal -->
    <div id="emailVerificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-envelope"></i> Verify Email</h3>
                <span class="close-modal" onclick="closeModal('emailVerificationModal')">&times;</span>
            </div>
            <div id="emailVerificationContent">
                <p>Please enter your email address to receive a verification code:</p>
                <input type="email" id="verifyEmailInput" placeholder="Your email address" required>
                <button onclick="sendVerificationCode()" style="width: 100%; margin-bottom: 15px;">
                    <span id="sendCodeText"><i class="fas fa-paper-plane"></i> Send Code</span>
                    <span id="sendCodeSpinner" class="hidden"><span class="spinner"></span> Sending...</span>
                </button>
                
                <div id="verificationCodeSection" class="hidden">
                    <p>We've sent a 6-digit code to your email. Please enter it below:</p>
                    <input type="text" id="verificationCode" placeholder="Verification code" maxlength="6" required>
                    <button onclick="verifyEmailCode()" style="width: 100%;">
                        <span id="verifyCodeText"><i class="fas fa-check"></i> Verify Code</span>
                        <span id="verifyCodeSpinner" class="hidden"><span class="spinner"></span> Verifying...</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Two-Factor Auth Modal -->
    <div id="twoFactorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-mobile-alt"></i> Two-Factor Authentication</h3>
                <span class="close-modal" onclick="closeModal('twoFactorModal')">&times;</span>
            </div>
            <div id="twoFactorContent">
                <p id="twoFactorMessage">Scan the QR code below with your authenticator app:</p>
                <div id="twoFactorQRCode" style="text-align: center; margin: 15px 0;">
                    <!-- QR code would be inserted here in a real app -->
                    <div style="width: 200px; height: 200px; background: #f0f0f0; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                        <span>QR Code Placeholder</span>
                    </div>
                </div>
                <p>Or enter this secret key manually:</p>
                <input type="text" id="twoFactorSecret" value="JBSWY3DPEHPK3PXP" readonly style="margin-bottom: 15px;">
                <p>Enter the 6-digit code from your authenticator app:</p>
                <input type="text" id="twoFactorCode" placeholder="123456" maxlength="6" required>
                <div class="modal-footer">
                    <button onclick="closeModal('twoFactorModal')" class="danger"><i class="fas fa-times"></i> Cancel</button>
                    <button onclick="confirmTwoFactorAuth()">
                        <span id="twoFactorText"><i class="fas fa-check"></i> Verify & Enable</span>
                        <span id="twoFactorSpinner" class="hidden"><span class="spinner"></span> Processing...</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dark Mode Toggle -->
    <div class="dark-mode-toggle" onclick="toggleDarkMode()">
        <i class="fas fa-moon" id="darkModeIcon"></i>
    </div>

    <!-- Footer with additional information -->
    <div class="footer">
        <p>Watch2Earn 2025 - Earn money by watching ads</p>
        <div class="footer-links">
            <a href="https://watch2earn-source-of-funds.pages.dev/" class="footer-link" target="_blank">
                <i class="fas fa-link"></i> Source of Funds
            </a>
            <a href="https://www.facebook.com/profile.php?id=61578004253422" class="footer-link" target="_blank">
                <i class="fas fa-headset"></i> Contact Support (CEO Alexander Reyes)
            </a>
            <a href="#" class="footer-link" onclick="showTermsModal()">
                <i class="fas fa-file-alt"></i> Terms & Conditions
            </a>
            <a href="#" class="footer-link" onclick="showPrivacyModal()">
                <i class="fas fa-shield-alt"></i> Privacy Policy
            </a>
        </div>
        <div class="footer-social">
            <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-telegram"></i></a>
        </div>
        <p style="margin-top: 15px;">© 2025 Watch2Earn. All rights reserved.</p>
    </div>

    <!-- Terms Modal -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-file-alt"></i> Terms & Conditions</h3>
                <span class="close-modal" onclick="closeModal('termsModal')">&times;</span>
            </div>
            <div style="max-height: 400px; overflow-y: auto; padding-right: 10px;">
                <h4>1. Account Registration</h4>
                <p>You must provide accurate and complete information when creating an account. You are responsible for maintaining the confidentiality of your account credentials.</p>
                
                <h4>2. Deposits</h4>
                <p>Minimum deposit is ₱50, maximum is ₱100,000. Deposits earn 10% daily for 365 days. You must watch 10 ads per day to earn.</p>
                
                <h4>3. Withdrawals</h4>
                <p>Minimum withdrawal is ₱50 with a 10% fee. Withdrawals are processed within 20 minutes during business hours.</p>
                
                <h4>4. Earnings</h4>
                <p>Earnings are calculated as 10% of your total active deposits, distributed across 10 ads per day. Each ad must be watched for 30 seconds.</p>
                
                <h4>5. Glamping</h4>
                <p>Glamping offers higher rewards but comes with higher risk. All Glamping plays are final and cannot be refunded.</p>
                
                <h4>6. Prohibited Activities</h4>
                <p>You may not use automated tools to watch ads, create multiple accounts, or engage in any fraudulent activity.</p>
                
                <h4>7. Account Termination</h4>
                <p>We reserve the right to terminate accounts that violate these terms without refund.</p>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('termsModal')" class="secondary"><i class="fas fa-check"></i> I Understand</button>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-shield-alt"></i> Privacy Policy</h3>
                <span class="close-modal" onclick="closeModal('privacyModal')">&times;</span>
            </div>
            <div style="max-height: 400px; overflow-y: auto; padding-right: 10px;">
                <h4>1. Information We Collect</h4>
                <p>We collect personal information including username, email, transaction details, and device information for account management and security purposes.</p>
                
                <h4>2. How We Use Information</h4>
                <p>Your information is used to provide services, process transactions, improve our platform, and communicate with you.</p>
                
                <h4>3. Data Security</h4>
                <p>We implement security measures to protect your data, including encryption and secure servers. However, no system is 100% secure.</p>
                
                <h4>4. Third-Party Services</h4>
                <p>We may use third-party services for payment processing and analytics, which have their own privacy policies.</p>
                
                <h4>5. Cookies</h4>
                <p>We use cookies to enhance your experience and analyze usage patterns. You can disable cookies in your browser settings.</p>
                
                <h4>6. Changes to Policy</h4>
                <p>We may update this policy periodically. Continued use of the service constitutes acceptance of the updated policy.</p>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('privacyModal')" class="secondary"><i class="fas fa-check"></i> I Understand</button>
            </div>
        </div>
    </div>

    <script>
        // Application data structure
        const appData = {
            users: JSON.parse(localStorage.getItem('watch2earn_users')) || [],
            transactions: JSON.parse(localStorage.getItem('watch2earn_transactions')) || [],
            deposits: JSON.parse(localStorage.getItem('watch2earn_deposits')) || [],
            currentUser: null,
            adsWatchedToday: 0,
            adInterval: null,
            timerInterval: null,
            secondsLeft: 30,
            youtubePlayer: null,
            currentAdIndex: 0,
            totalAdsWatched: parseInt(localStorage.getItem('watch2earn_totalAds')) || 0,
            darkMode: localStorage.getItem('watch2earn_darkMode') === 'true',
            isAdmin: false,
            verificationCode: null,
            verificationCodes: JSON.parse(localStorage.getItem('watch2earn_verificationCodes')) || [],
            youtubeAds: [
                'dQw4w9WgXcQ', // Example ad 1
                '9bZkp7q19f0', // Example ad 2
                'kJQP7kiw5Fk', // Example ad 3
                'RgKAFK5djSk', // Example ad 4
                'JGwWNGJdvx8'  // Example ad 5
            ]
        };

        // Initialize the application
        function init() {
            // Set dark mode if enabled
            if (appData.darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeIcon').className = 'fas fa-sun';
            }
            
            // Initialize YouTube player
            appData.youtubePlayer = document.getElementById('youtubePlayer');
            
            // Set up event listeners
            setupEventListeners();
            
            // Check if user is already logged in
            checkLoggedInUser();
            
            // Check if first visit
            checkFirstVisit();
            
            // Load ad watching progress if any
            loadAdProgress();
        }

        // Set up all event listeners
        function setupEventListeners() {
            document.getElementById('withdrawAmount').addEventListener('input', updateWithdrawFee);
            document.getElementById('depositAmount').addEventListener('input', validateDepositAmount);
            document.getElementById('paymentProof').addEventListener('change', handleProofUpload);
            document.getElementById('avatarUpload').addEventListener('change', handleAvatarUpload);
            
            // Prevent form submissions on Enter key
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                    }
                });
            });
        }

        // Check if user is logged in
        function checkLoggedInUser() {
            const loggedInUserId = localStorage.getItem('watch2earn_currentUserId');
            if (loggedInUserId) {
                appData.currentUser = appData.users.find(user => user.id === loggedInUserId);
                if (appData.currentUser) {
                    updateUserLogin();
                    showApp();
                }
            }
        }

        // Update user login information
        function updateUserLogin() {
            // Update last login time
            appData.currentUser.lastLogin = new Date().toISOString();
            
            // Update days active if not already logged in today
            const today = new Date().toDateString();
            const lastLoginDate = appData.currentUser.lastLogin ? 
                new Date(appData.currentUser.lastLogin).toDateString() : null;
                
            if (lastLoginDate !== today) {
                appData.currentUser.totalDaysActive = (appData.currentUser.totalDaysActive || 0) + 1;
                saveUserData();
            }
        }

        // Check if this is the user's first visit
        function checkFirstVisit() {
            if (!localStorage.getItem('watch2earn_firstVisit')) {
                showAlert('Welcome to Watch2Earn! Start by making a deposit and watching ads to earn daily.', 'info');
                localStorage.setItem('watch2earn_firstVisit', 'true');
            }
        }

        // Load ad watching progress from localStorage
        function loadAdProgress() {
            if (!appData.currentUser) return;
            
            const today = new Date().toDateString();
            const lastAdDate = localStorage.getItem(`watch2earn_lastAdDate_${appData.currentUser.id}`);
            
            if (lastAdDate === today) {
                appData.adsWatchedToday = parseInt(localStorage.getItem(`watch2earn_ads_${appData.currentUser.id}_${today}`)) || 0;
                document.getElementById('adsWatched').textContent = appData.adsWatchedToday;
                document.getElementById('adProgressFill').style.width = `${(appData.adsWatchedToday / 10) * 100}%`;
            }
        }

        // Toggle dark mode
        function toggleDarkMode() {
            appData.darkMode = !appData.darkMode;
            localStorage.setItem('watch2earn_darkMode', appData.darkMode);
            
            if (appData.darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeIcon').className = 'fas fa-sun';
            } else {
                document.body.classList.remove('dark-mode');
                document.getElementById('darkModeIcon').className = 'fas fa-moon';
            }
        }

        // Toggle password visibility
        function togglePassword(id) {
            const input = document.getElementById(id);
            const icon = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash password-toggle';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye password-toggle';
            }
        }

        // Check password strength
        function checkPasswordStrength(type = 'register') {
            const password = type === 'register' 
                ? document.getElementById('registerPassword').value 
                : document.getElementById('newPassword').value;
            const strengthBar = type === 'register' 
                ? document.getElementById('passwordStrengthFill') 
                : document.getElementById('newPasswordStrengthFill');
            
            let strength = 0;
            
            // Length check
            if (password.length >= 6) strength += 20;
            if (password.length >= 8) strength += 20;
            
            // Contains numbers
            if (/\d/.test(password)) strength += 20;
            
            // Contains special chars
            if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength += 20;
            
            // Contains upper and lower case
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength += 20;
            
            strengthBar.style.width = `${strength}%`;
            
            // Color coding
            if (strength < 40) {
                strengthBar.style.backgroundColor = 'var(--danger-color)';
            } else if (strength < 80) {
                strengthBar.style.backgroundColor = 'var(--warning-color)';
            } else {
                strengthBar.style.backgroundColor = 'var(--primary-color)';
            }
        }

        // Handle avatar upload
        function handleAvatarUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validate file type and size
            if (!file.type.match('image.*')) {
                showAlert('Please upload an image file (JPEG, PNG)', 'warning');
                return;
            }
            
            if (file.size > 2 * 1024 * 1024) { // 2MB limit
                showAlert('Image size must be less than 2MB', 'warning');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const avatar = document.getElementById('profileAvatar');
                avatar.innerHTML = '';
                
                const img = document.createElement('img');
                img.src = e.target.result;
                img.alt = 'Profile Picture';
                
                const uploadBtn = document.createElement('div');
                uploadBtn.className = 'profile-avatar-upload';
                uploadBtn.textContent = 'Change Photo';
                uploadBtn.onclick = function() {
                    document.getElementById('avatarUpload').click();
                };
                
                avatar.appendChild(img);
                avatar.appendChild(uploadBtn);
                
                // Save to user data
                if (appData.currentUser) {
                    appData.currentUser.avatar = e.target.result;
                    const updatedUsers = appData.users.map(u => 
                        u.id === appData.currentUser.id ? appData.currentUser : u
                    );
                    appData.users = updatedUsers;
                    localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                }
            };
            reader.readAsDataURL(file);
        }

        // Handle payment proof upload
        function handleProofUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validate file type and size
            if (!file.type.match('image.*')) {
                showAlert('Please upload an image file (JPEG, PNG)', 'warning');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) { // 5MB limit
                showAlert('Image size must be less than 5MB', 'warning');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('proofPreview');
                preview.innerHTML = `<img src="${e.target.result}" alt="Payment Proof">`;
            };
            reader.readAsDataURL(file);
        }

        // Save user data to localStorage
        function saveUserData() {
            localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
            localStorage.setItem('watch2earn_transactions', JSON.stringify(appData.transactions));
            localStorage.setItem('watch2earn_deposits', JSON.stringify(appData.deposits));
            localStorage.setItem('watch2earn_totalAds', appData.totalAdsWatched.toString());
            localStorage.setItem('watch2earn_verificationCodes', JSON.stringify(appData.verificationCodes));
        }

        // Validate deposit amount
        function validateDepositAmount() {
            const amountInput = document.getElementById('depositAmount');
            const amount = parseFloat(amountInput.value);
            
            if (isNaN(amount)) return;
            
            if (amount < 50) {
                amountInput.setCustomValidity('Minimum deposit is ₱50');
            } else if (amount > 100000) {
                amountInput.setCustomValidity('Maximum deposit is ₱100,000');
            } else {
                amountInput.setCustomValidity('');
            }
        }

        // Show register form
        function showRegister() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('registerSection').classList.remove('hidden');
            document.getElementById('forgotPasswordSection').classList.add('hidden');
            document.getElementById('adminLoginSection').classList.add('hidden');
            document.getElementById('registerUsername').focus();
        }

        // Show login form
        function showLogin() {
            document.getElementById('registerSection').classList.add('hidden');
            document.getElementById('loginSection').classList.remove('hidden');
            document.getElementById('forgotPasswordSection').classList.add('hidden');
            document.getElementById('adminLoginSection').classList.add('hidden');
            document.getElementById('loginUsername').focus();
        }

        // Show admin login form
        function showAdminLogin() {
            document.getElementById('registerSection').classList.add('hidden');
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('forgotPasswordSection').classList.add('hidden');
            document.getElementById('adminLoginSection').classList.remove('hidden');
            document.getElementById('adminPassword').focus();
        }

        // Show forgot password form
        function showForgotPassword() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('registerSection').classList.add('hidden');
            document.getElementById('adminLoginSection').classList.add('hidden');
            document.getElementById('forgotPasswordSection').classList.remove('hidden');
            document.getElementById('forgotUsername').focus();
        }

        // Show main app
        function showApp() {
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('registerSection').classList.add('hidden');
            document.getElementById('forgotPasswordSection').classList.add('hidden');
            document.getElementById('adminLoginSection').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            updateWallet();
            loadTransactions();
            checkDailyReset();
            showTab('earnTab');
            updateProfile();
            
            // Show admin panel if user is admin
            if (appData.isAdmin) {
                document.getElementById('adminPanel').classList.remove('hidden');
                document.getElementById('adminTabBtn').classList.remove('hidden');
                loadPendingAccounts();
            } else {
                document.getElementById('adminPanel').classList.add('hidden');
                document.getElementById('adminTabBtn').classList.add('hidden');
            }
        }

        // Register new user
        function register() {
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value.trim();
            const confirmPassword = document.getElementById('registerConfirmPassword').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            
            // Validate inputs
            if (!validateRegistration(username, password, confirmPassword, email)) {
                return;
            }
            
            // Create new user
            const newUser = {
                id: Date.now().toString(),
                username,
                password: hashPassword(password),
                balance: 0,
                joinedDate: new Date().toISOString(),
                lastLogin: new Date().toISOString(),
                email: email || '',
                isEmailVerified: false,
                isVerified: false, // New field for account verification status
                twoFactorEnabled: false,
                lastPasswordChange: null,
                totalAdsWatched: 0,
                totalDaysActive: 1,
                avatar: null
            };
            
            // Add to users array and save
            appData.users.push(newUser);
            localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
            
            // Auto-login the new user
            appData.currentUser = newUser;
            localStorage.setItem('watch2earn_currentUserId', appData.currentUser.id);
            
            showAlert('Registration successful! You have been automatically logged in.', 'success');
            showApp();
            
            // Clear registration form
            document.getElementById('registerUsername').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerConfirmPassword').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('passwordStrengthFill').style.width = '0%';
        }

        // Validate registration inputs
        function validateRegistration(username, password, confirmPassword, email) {
            if (!username || !password || !confirmPassword) {
                showAlert('Please fill in all required fields', 'warning');
                return false;
            }
            
            if (username.length < 4) {
                showAlert('Username must be at least 4 characters', 'warning');
                return false;
            }
            
            if (password.length < 6) {
                showAlert('Password must be at least 6 characters', 'warning');
                return false;
            }
            
            if (password !== confirmPassword) {
                showAlert('Passwords do not match', 'warning');
                return false;
            }
            
            if (email && !/^\S+@\S+\.\S+$/.test(email)) {
                showAlert('Please enter a valid email address', 'warning');
                return false;
            }
            
            // Check for existing username or email
            if (appData.users.some(u => u.username === username)) {
                showAlert('Username already exists', 'warning');
                return false;
            }
            
            if (email && appData.users.some(u => u.email === email)) {
                showAlert('Email is already registered', 'warning');
                return false;
            }
            
            return true;
        }

        // Basic client-side hashing function (for demo purposes only)
        function hashPassword(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            return hash.toString();
        }

        // Send password reset (simulated)
        function sendPasswordReset() {
            const username = document.getElementById('forgotUsername').value.trim();
            
            if (!username) {
                showAlert('Please enter your username', 'warning');
                return;
            }
            
            // In a real app, you would send an email with reset instructions
            showAlert('If an account exists with this username, password reset instructions have been sent.', 'info');
            showLogin();
        }

        // Login user
        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            if (!username || !password) {
                showAlert('Please enter both username and password', 'warning');
                return;
            }
            
            const user = appData.users.find(u => u.username === username);
            
            if (user && user.password === hashPassword(password)) {
                appData.currentUser = user;
                appData.currentUser.lastLogin = new Date().toISOString();
                appData.isAdmin = false; // Regular user login
                
                // Update days active if not already logged in today
                const today = new Date().toDateString();
                const lastLoginDate = user.lastLogin ? new Date(user.lastLogin).toDateString() : null;
                if (lastLoginDate !== today) {
                    appData.currentUser.totalDaysActive = (appData.currentUser.totalDaysActive || 0) + 1;
                }
                
                // Update user data
                const updatedUsers = appData.users.map(u => 
                    u.id === user.id ? appData.currentUser : u
                );
                appData.users = updatedUsers;
                localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                localStorage.setItem('watch2earn_currentUserId', appData.currentUser.id);
                
                showApp();
            } else {
                showAlert('Invalid username or password', 'warning');
            }
        }

        // Admin login
        function adminLogin() {
            const password = document.getElementById('adminPassword').value.trim();
            const adminPassword = "acero123"; // Default admin password
            
            if (!password) {
                showAlert('Please enter admin password', 'warning');
                return;
            }
            
            if (password === adminPassword) {
                // Create admin user if not exists
                const adminUser = {
                    id: "admin",
                    username: "admin",
                    password: hashPassword(adminPassword),
                    isAdmin: true,
                    joinedDate: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                
                // Check if admin user already exists
                const existingAdmin = appData.users.find(u => u.id === "admin");
                if (!existingAdmin) {
                    appData.users.push(adminUser);
                    localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                }
                
                appData.currentUser = adminUser;
                appData.isAdmin = true;
                localStorage.setItem('watch2earn_currentUserId', appData.currentUser.id);
                
                showAlert('Admin login successful!', 'success');
                showApp();
            } else {
                showAlert('Invalid admin password', 'warning');
            }
        }

        // Confirm reset all data
        function confirmReset() {
            if (confirm('Are you sure you want to reset ALL data? This cannot be undone!')) {
                resetAllData();
            }
        }

        // Reset all application data
        function resetAllData() {
            // Clear all localStorage data
            localStorage.removeItem('watch2earn_users');
            localStorage.removeItem('watch2earn_transactions');
            localStorage.removeItem('watch2earn_deposits');
            localStorage.removeItem('watch2earn_currentUserId');
            localStorage.removeItem('watch2earn_totalAds');
            localStorage.removeItem('watch2earn_firstVisit');
            localStorage.removeItem('watch2earn_verificationCodes');
            
            // Clear all variables
            appData.users = [];
            appData.transactions = [];
            appData.deposits = [];
            appData.currentUser = null;
            appData.adsWatchedToday = 0;
            appData.totalAdsWatched = 0;
            appData.isAdmin = false;
            appData.verificationCodes = [];
            
            // Clear any active intervals
            if (appData.adInterval) clearInterval(appData.adInterval);
            if (appData.timerInterval) clearInterval(appData.timerInterval);
            
            // Reset UI
            document.getElementById('app').classList.add('hidden');
            document.getElementById('loginSection').classList.remove('hidden');
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
            
            showAlert('All data has been reset successfully', 'success');
        }

        // Show tab with animation
        function showTab(tabId) {
            document.querySelectorAll('.card').forEach(card => {
                if (card.id && card.id.endsWith('Tab')) {
                    card.classList.add('hidden');
                }
            });
            
            const tab = document.getElementById(tabId);
            if (tab) {
                tab.classList.remove('hidden');
                tab.style.opacity = 0;
                
                setTimeout(() => {
                    tab.style.opacity = 1;
                }, 10);
            }
            
            // Update withdraw fee when showing withdraw tab
            if (tabId === 'withdrawTab') {
                updateWithdrawFee();
            }
            
            // Update profile when showing profile tab
            if (tabId === 'profileTab') {
                updateProfile();
            }
            
            // Update daily status when showing earn tab
            if (tabId === 'earnTab' && appData.currentUser) {
                updateDailyStatus();
            }
            
            // Load pending accounts when showing admin panel
            if (tabId === 'adminPanel' && appData.isAdmin) {
                loadPendingAccounts();
            }
        }

        // Update daily status indicator
        function updateDailyStatus() {
            if (!appData.currentUser) return;
            
            const userDeposits = appData.deposits.filter(d => d.userId === appData.currentUser.id);
            const activeDeposits = userDeposits.filter(d => {
                const depositDate = new Date(d.date);
                const expiryDate = new Date(depositDate.getTime() + 365 * 24 * 60 * 60 * 1000);
                return expiryDate > new Date();
            });
            
            if (activeDeposits.length > 0) {
                const firstDeposit = new Date(activeDeposits[0].date);
                const today = new Date();
                const diffTime = Math.abs(today - firstDeposit);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                document.getElementById('dailyStatus').textContent = `Day ${Math.min(diffDays, 365)}/365`;
            } else {
                document.getElementById('dailyStatus').textContent = 'No active deposits';
            }
        }

        // Show modal
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        // Show terms modal
        function showTermsModal() {
            showModal('termsModal');
        }

        // Show privacy modal
        function showPrivacyModal() {
            showModal('privacyModal');
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            
            // Clear inputs for specific modals
            if (modalId === 'changePasswordModal') {
                document.getElementById('currentPassword').value = '';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmPassword').value = '';
                document.getElementById('newPasswordStrengthFill').style.width = '0%';
            } else if (modalId === 'emailVerificationModal') {
                document.getElementById('verifyEmailInput').value = '';
                document.getElementById('verificationCode').value = '';
                document.getElementById('verificationCodeSection').classList.add('hidden');
            }
        }

        // Update profile information
        function updateProfile() {
            if (!appData.currentUser) return;
            
            // Avatar
            const avatar = document.getElementById('profileAvatar');
            avatar.innerHTML = '';
            
            if (appData.currentUser.avatar) {
                const img = document.createElement('img');
                img.src = appData.currentUser.avatar;
                img.alt = 'Profile Picture';
                avatar.appendChild(img);
            } else {
                const initial = document.createElement('div');
                initial.textContent = appData.currentUser.username.charAt(0).toUpperCase();
                avatar.appendChild(initial);
            }
            
            // Add upload button
            const uploadBtn = document.createElement('div');
            uploadBtn.className = 'profile-avatar-upload';
            uploadBtn.textContent = 'Change Photo';
            uploadBtn.onclick = function() {
                document.getElementById('avatarUpload').click();
            };
            avatar.appendChild(uploadBtn);
            
            // Basic info
            document.getElementById('profileName').textContent = appData.currentUser.username;
            document.getElementById('profileUsername').textContent = '@' + appData.currentUser.username.toLowerCase();
            document.getElementById('memberSince').textContent = 'Member since: ' + formatDateShort(appData.currentUser.joinedDate);
            document.getElementById('userId').textContent = 'ID: ' + appData.currentUser.id.substring(0, 8);
            
            // Stats
            document.getElementById('totalAdsWatched').textContent = appData.currentUser.totalAdsWatched || 0;
            document.getElementById('totalDaysActive').textContent = appData.currentUser.totalDaysActive || 1;
            document.getElementById('accountLevel').textContent = calculateAccountLevel(appData.currentUser);
            
            // Details
            document.getElementById('detailUsername').textContent = appData.currentUser.username;
            document.getElementById('detailEmail').textContent = appData.currentUser.email || 'Not set';
            document.getElementById('detailLastLogin').textContent = formatDate(appData.currentUser.lastLogin);
            
            // Account verification status
            const statusElement = document.getElementById('detailStatus');
            if (appData.currentUser.isVerified) {
                statusElement.textContent = 'Verified';
                statusElement.className = 'badge certified';
                
                // Update verification section
                document.getElementById('verificationStatusMessage').innerHTML = '<p>Your account has been successfully verified!</p>';
                document.getElementById('verificationStatusText').textContent = 'Status: Verified';
                document.getElementById('verificationStatusBadge').className = 'badge success';
                document.getElementById('verificationStatusBadge').textContent = 'Verified';
                document.getElementById('userVerificationCode').value = '';
                document.getElementById('userVerificationCode').style.display = 'none';
                document.querySelector('#profileTab .verification-form button').style.display = 'none';
            } else {
                statusElement.textContent = 'Pending Verification';
                statusElement.className = 'badge pending';
                
                // Update verification section
                document.getElementById('verificationStatusMessage').innerHTML = '<p>To verify your account, please contact support first at <a href="https://www.facebook.com/profile.php?id=61578004253422" target="_blank">Facebook Support</a> to notify them about your pending verification. Then enter the 6-digit verification code provided by support.</p>';
                document.getElementById('verificationStatusText').textContent = 'Status: Not verified';
                document.getElementById('verificationStatusBadge').className = 'badge pending';
                document.getElementById('verificationStatusBadge').textContent = 'Pending';
                document.getElementById('userVerificationCode').style.display = '';
                document.querySelector('#profileTab .verification-form button').style.display = '';
            }
            
            // Password info
            document.getElementById('passwordLastChanged').textContent = 
                appData.currentUser.lastPasswordChange ? formatDate(appData.currentUser.lastPasswordChange) : 'Never';
            
            // Email verification
            const emailStatus = document.getElementById('emailVerificationStatus');
            const verifyBtn = document.getElementById('verifyEmailBtn');
            if (appData.currentUser.isEmailVerified) {
                emailStatus.textContent = 'Verified';
                emailStatus.className = 'positive';
                verifyBtn.disabled = true;
                verifyBtn.innerHTML = '<i class="fas fa-check"></i> Verified';
            } else {
                emailStatus.textContent = 'Not verified';
                emailStatus.className = 'negative';
                verifyBtn.disabled = false;
                verifyBtn.innerHTML = '<i class="fas fa-envelope"></i> Verify';
            }
            
            // Two-factor auth
            const twoFactorBtn = document.getElementById('twoFactorBtn');
            if (appData.currentUser.twoFactorEnabled) {
                twoFactorBtn.innerHTML = '<i class="fas fa-lock"></i> Disable';
                twoFactorBtn.classList.remove('info');
                twoFactorBtn.classList.add('warning');
            } else {
                twoFactorBtn.innerHTML = '<i class="fas fa-mobile-alt"></i> Enable';
                twoFactorBtn.classList.remove('warning');
                twoFactorBtn.classList.add('info');
            }
        }

        // Calculate account level based on activity
        function calculateAccountLevel(user) {
            const daysActive = user.totalDaysActive || 1;
            const adsWatched = user.totalAdsWatched || 0;
            const userDeposits = appData.deposits.filter(d => d.userId === user.id && new Date(d.date).getTime() + (365 * 24 * 60 * 60 * 1000) > Date.now());
            
            let level = 1;
            
            if (daysActive >= 30) level++;
            if (daysActive >= 90) level++;
            if (daysActive >= 180) level++;
            if (daysActive >= 365) level++;
            
            if (adsWatched >= 100) level++;
            if (adsWatched >= 500) level++;
            if (adsWatched >= 1000) level++;
            
            if (userDeposits.length >= 1) level++;
            if (userDeposits.length >= 5) level++;
            if (userDeposits.length >= 10) level++;
            
            return Math.min(level, 10); // Max level is 10
        }

        // Format date for display (short version)
        function formatDateShort(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString();
        }

        // Show change password modal
        function showChangePasswordModal() {
            showModal('changePasswordModal');
        }

        // Save new password
        function saveNewPassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!appData.currentUser) return;
            
            if (hashPassword(currentPassword) !== appData.currentUser.password) {
                showAlert('Current password is incorrect', 'warning');
                return;
            }
            
            if (newPassword.length < 6) {
                showAlert('New password must be at least 6 characters', 'warning');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showAlert('New passwords do not match', 'warning');
                return;
            }
            
            // Show loading state
            const saveBtn = document.querySelector('#changePasswordModal button:last-child');
            saveBtn.innerHTML = '<span class="spinner"></span> Saving...';
            saveBtn.disabled = true;
            
            // Simulate API call delay
            setTimeout(() => {
                // Update password
                appData.currentUser.password = hashPassword(newPassword);
                appData.currentUser.lastPasswordChange = new Date().toISOString();
                
                // Update in users array
                const updatedUsers = appData.users.map(u => 
                    u.id === appData.currentUser.id ? appData.currentUser : u
                );
                appData.users = updatedUsers;
                localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                
                showAlert('Password changed successfully!', 'success');
                closeModal('changePasswordModal');
                updateProfile();
                
                // Reset button
                saveBtn.innerHTML = '<i class="fas fa-save"></i> Save Changes';
                saveBtn.disabled = false;
            }, 1000);
        }

        // Verify email (simulated)
        function verifyEmail() {
            if (!appData.currentUser) return;
            
            if (appData.currentUser.isEmailVerified) {
                showAlert('Email is already verified', 'info');
                return;
            }
            
            if (!appData.currentUser.email) {
                showAlert('Please set an email address in your profile first', 'warning');
                return;
            }
            
            showModal('emailVerificationModal');
            document.getElementById('verifyEmailInput').value = appData.currentUser.email;
        }

        // Send verification code (simulated)
        function sendVerificationCode() {
            const emailInput = document.getElementById('verifyEmailInput');
            const email = emailInput.value.trim();
            
            if (!email || !email.includes('@')) {
                showAlert('Please enter a valid email address', 'warning');
                return;
            }
            
            // Show loading state
            document.getElementById('sendCodeText').classList.add('hidden');
            document.getElementById('sendCodeSpinner').classList.remove('hidden');
            
            // In a real app, you would send an email with a verification code here
            // For this demo, we'll simulate it with a fixed code
            setTimeout(() => {
                appData.currentUser.email = email;
                const updatedUsers = appData.users.map(u => 
                    u.id === appData.currentUser.id ? appData.currentUser : u
                );
                appData.users = updatedUsers;
                localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                
                document.getElementById('verificationCodeSection').classList.remove('hidden');
                showAlert('Verification code sent to your email!', 'info');
                
                // Reset button
                document.getElementById('sendCodeText').classList.remove('hidden');
                document.getElementById('sendCodeSpinner').classList.add('hidden');
            }, 1500);
        }

        // Verify email code (simulated)
        function verifyEmailCode() {
            // In a real app, you would validate the code sent to the user's email
            // For this demo, we'll accept any 6-digit code
            const code = document.getElementById('verificationCode').value.trim();
            
            if (!code || code.length !== 6) {
                showAlert('Please enter a valid 6-digit code', 'warning');
                return;
            }
            
            // Show loading state
            document.getElementById('verifyCodeText').classList.add('hidden');
            document.getElementById('verifyCodeSpinner').classList.remove('hidden');
            
            setTimeout(() => {
                appData.currentUser.isEmailVerified = true;
                
                // Update in users array
                const updatedUsers = appData.users.map(u => 
                    u.id === appData.currentUser.id ? appData.currentUser : u
                );
                appData.users = updatedUsers;
                localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                
                showAlert('Email verification successful!', 'success');
                closeModal('emailVerificationModal');
                updateProfile();
                
                // Reset button
                document.getElementById('verifyCodeText').classList.remove('hidden');
                document.getElementById('verifyCodeSpinner').classList.add('hidden');
            }, 1500);
        }

        // Toggle two-factor authentication
        function toggleTwoFactorAuth() {
            if (!appData.currentUser) return;
            
            if (appData.currentUser.twoFactorEnabled) {
                if (confirm('Are you sure you want to disable two-factor authentication? This reduces your account security.')) {
                    appData.currentUser.twoFactorEnabled = false;
                    
                    // Update in users array
                    const updatedUsers = appData.users.map(u => 
                        u.id === appData.currentUser.id ? appData.currentUser : u
                    );
                    appData.users = updatedUsers;
                    localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                    
                    showAlert('Two-factor authentication has been disabled', 'warning');
                    updateProfile();
                }
            } else {
                showModal('twoFactorModal');
            }
        }

        // Confirm two-factor authentication setup
        function confirmTwoFactorAuth() {
            // In a real app, you would validate the 2FA code here
            // For this demo, we'll accept any 6-digit code
            const code = document.getElementById('twoFactorCode').value.trim();
            
            if (!code || code.length !== 6) {
                showAlert('Please enter a valid 6-digit code', 'warning');
                return;
            }
            
            // Show loading state
            document.getElementById('twoFactorText').classList.add('hidden');
            document.getElementById('twoFactorSpinner').classList.remove('hidden');
            
            setTimeout(() => {
                appData.currentUser.twoFactorEnabled = true;
                
                // Update in users array
                const updatedUsers = appData.users.map(u => 
                    u.id === appData.currentUser.id ? appData.currentUser : u
                );
                appData.users = updatedUsers;
                localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                
                showAlert('Two-factor authentication has been enabled', 'success');
                closeModal('twoFactorModal');
                updateProfile();
                
                // Reset button
                document.getElementById('twoFactorText').classList.remove('hidden');
                document.getElementById('twoFactorSpinner').classList.add('hidden');
            }, 1500);
        }

        // Update wallet display
        function updateWallet() {
            if (!appData.currentUser) return;
            
            // Get all deposits (including expired ones)
            const userDeposits = appData.deposits.filter(d => d.userId === appData.currentUser.id);
            
            // Get active deposits (not expired)
            const activeDeposits = userDeposits.filter(d => {
                const depositDate = new Date(d.date);
                const expiryDate = new Date(depositDate.getTime() + 365 * 24 * 60 * 60 * 1000);
                return expiryDate > new Date();
            });
            
            const withdrawals = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'withdrawal');
            const earnings = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'income');
            const glamping = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'glamping');
            
            const totalDeposit = userDeposits.reduce((sum, d) => sum + d.amount, 0);
            const totalActiveDeposit = activeDeposits.reduce((sum, d) => sum + d.amount, 0);
            const totalWithdrawn = withdrawals.reduce((sum, t) => sum + t.amount, 0);
            const totalIncome = earnings.reduce((sum, t) => sum + t.amount, 0);
            const totalGlamping = glamping.reduce((sum, t) => sum + t.amount, 0);
            const availableBalance = totalIncome - totalWithdrawn - totalGlamping;
            
            // Format currency with commas
            const formatCurrency = (amount) => {
                return '₱' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
            };
            
            // Update wallet display
            document.getElementById('totalDeposit').textContent = formatCurrency(totalDeposit);
            document.getElementById('activeDeposits').textContent = formatCurrency(totalActiveDeposit);
            document.getElementById('totalIncome').textContent = formatCurrency(totalIncome);
            document.getElementById('availableBalance').textContent = formatCurrency(availableBalance);
            
            // Update today's earnings
            const todayEarnings = earnings
                .filter(e => new Date(e.date).toDateString() === new Date().toDateString())
                .reduce((sum, t) => sum + t.amount, 0);
            document.getElementById('todayEarnings').textContent = formatCurrency(todayEarnings);
            
            // Update ad progress fill
            const adProgress = (appData.adsWatchedToday / 10) * 100;
            document.getElementById('adProgressFill').style.width = `${adProgress}%`;
        }

        // Submit deposit
        function submitDeposit() {
            const amountInput = document.getElementById('depositAmount');
            const amount = parseFloat(amountInput.value);
            const proofInput = document.getElementById('paymentProof');
            
            if (isNaN(amount) || amount < 50 || amount > 100000) {
                showAlert('Please enter amount between ₱50 and ₱100,000', 'warning');
                amountInput.focus();
                return;
            }
            
            if (!proofInput.files || proofInput.files.length === 0) {
                showAlert('Please upload payment proof', 'warning');
                proofInput.focus();
                return;
            }
            
            // Create deposit record
            const deposit = {
                id: Date.now().toString(),
                userId: appData.currentUser.id,
                amount: amount,
                date: new Date().toISOString(),
                expiryDate: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString(),
                status: 'active',
                expectedDailyEarnings: amount * 0.10,
                paymentProof: 'uploaded' // In a real app, you would upload this to a server
            };
            
            appData.deposits.push(deposit);
            localStorage.setItem('watch2earn_deposits', JSON.stringify(appData.deposits));
            
            // Create transaction record
            const transaction = {
                id: Date.now().toString(),
                userId: appData.currentUser.id,
                type: 'deposit',
                amount: amount,
                date: new Date().toISOString(),
                status: 'completed',
                description: `Deposit for daily earnings (₱${(amount*0.10).toFixed(2)}/day)`
            };
            
            appData.transactions.push(transaction);
            localStorage.setItem('watch2earn_transactions', JSON.stringify(appData.transactions));
            
            showAlert(`Deposit of ₱${amount.toFixed(2)} successful! You can now earn ₱${(amount*0.10).toFixed(2)} per day for 365 days.`, 'success');
            
            // Clear form
            amountInput.value = '';
            proofInput.value = '';
            document.getElementById('proofPreview').innerHTML = '';
            
            updateWallet();
            loadTransactions();
            updateProfile();
            showTab('earnTab');
            updateDailyStatus();
        }

        // Update withdraw fee calculation
        function updateWithdrawFee() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value) || 0;
            const fee = amount * 0.10;
            const afterFee = amount - fee;
            
            document.getElementById('afterFee').textContent = `₱${afterFee.toFixed(2)} (Fee: ₱${fee.toFixed(2)})`;
            
            // Check if amount exceeds available balance
            const earnings = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'income');
            const withdrawals = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'withdrawal');
            const glamping = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'glamping');
            
            const totalIncome = earnings.reduce((sum, t) => sum + t.amount, 0);
            const totalWithdrawn = withdrawals.reduce((sum, t) => sum + t.amount, 0);
            const totalGlamping = glamping.reduce((sum, t) => sum + t.amount, 0);
            const available = totalIncome - totalWithdrawn - totalGlamping;
            
            if (amount > available) {
                document.getElementById('afterFee').textContent += ' - Insufficient balance';
            }
        }

        // Submit withdrawal
        function submitWithdrawal() {
            const amountInput = document.getElementById('withdrawAmount');
            const gcashNumberInput = document.getElementById('gcashNumber');
            const gcashNameInput = document.getElementById('gcashName');
            
            const amount = parseFloat(amountInput.value);
            const gcashNumber = gcashNumberInput.value.trim();
            const gcashName = gcashNameInput.value.trim();
            
            if (isNaN(amount)) {
                showAlert('Please enter a valid amount', 'warning');
                amountInput.focus();
                return;
            }
            
            if (amount < 50) {
                showAlert('Minimum withdrawal is ₱50', 'warning');
                amountInput.focus();
                return;
            }
            
            if (!gcashNumber || !/^\d{11}$/.test(gcashNumber)) {
                showAlert('Please enter a valid 11-digit GCash number', 'warning');
                gcashNumberInput.focus();
                return;
            }
            
            if (!gcashName || gcashName.length < 3) {
                showAlert('Please enter valid GCash account name', 'warning');
                gcashNameInput.focus();
                return;
            }
            
            // Check balance (only against income)
            const earnings = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'income');
            const withdrawals = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'withdrawal');
            const glamping = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'glamping');
            
            const totalIncome = earnings.reduce((sum, t) => sum + t.amount, 0);
            const totalWithdrawn = withdrawals.reduce((sum, t) => sum + t.amount, 0);
            const totalGlamping = glamping.reduce((sum, t) => sum + t.amount, 0);
            const available = totalIncome - totalWithdrawn - totalGlamping;
            
            if (amount > available) {
                showAlert('Insufficient balance for withdrawal', 'warning');
                amountInput.focus();
                return;
            }
            
            const withdrawal = {
                id: Date.now().toString(),
                userId: appData.currentUser.id,
                type: 'withdrawal',
                amount: amount,
                fee: amount * 0.10,
                netAmount: amount * 0.90,
                gcashNumber: gcashNumber,
                gcashName: gcashName,
                date: new Date().toISOString(),
                status: 'pending',
                processedDate: null
            };
            
            appData.transactions.push(withdrawal);
            localStorage.setItem('watch2earn_transactions', JSON.stringify(appData.transactions));
            
            // Show loading state
            const withdrawBtn = document.querySelector('#withdrawTab button');
            withdrawBtn.innerHTML = '<span class="spinner"></span> Processing...';
            withdrawBtn.disabled = true;
            
            // Auto-approve after delay (simulated)
            setTimeout(() => {
                const index = appData.transactions.findIndex(t => t.id === withdrawal.id);
                if (index !== -1) {
                    appData.transactions[index].status = 'completed';
                    appData.transactions[index].processedDate = new Date().toISOString();
                    localStorage.setItem('watch2earn_transactions', JSON.stringify(appData.transactions));
                    updateWallet();
                    loadTransactions();
                    
                    // Show notification if user is still logged in
                    if (appData.currentUser && document.getElementById('withdrawTab').classList.contains('hidden')) {
                        showAlert(`Your withdrawal of ₱${amount.toFixed(2)} has been processed and sent to your GCash account.`, 'success');
                    }
                }
                
                // Reset button
                withdrawBtn.innerHTML = '<i class="fas fa-money-bill-wave"></i> Request Withdrawal';
                withdrawBtn.disabled = false;
            }, 2000); // 2 seconds for demo (would be 20 minutes in real app)
            
            showAlert('Withdrawal request submitted! It will be processed within 20 minutes.', 'success');
            amountInput.value = '';
            gcashNumberInput.value = '';
            gcashNameInput.value = '';
            updateWallet();
            loadTransactions();
            showTab('historyTab');
        }

        // Play glamping game
        function playGlamping(amount, multiplier) {
            if (!appData.currentUser) return;
            
            // Check balance
            const earnings = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'income');
            const withdrawals = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'withdrawal');
            const glamping = appData.transactions.filter(t => t.userId === appData.currentUser.id && t.type === 'glamping');
            
            const totalIncome = earnings.reduce((sum, t) => sum + t.amount, 0);
            const totalWithdrawn = withdrawals.reduce((sum, t) => sum + t.amount, 0);
            const totalGlamping = glamping.reduce((sum, t) => sum + t.amount, 0);
            const available = totalIncome - totalWithdrawn - totalGlamping;
            
            if (amount > available) {
                showAlert('Insufficient balance for this Glamping play', 'warning');
                return;
            }
            
            // Disable button during play
            const buttonId = `${amount === 50 ? 'mini' : amount === 100 ? 'basic' : amount === 500 ? 'premium' : amount === 1000 ? 'vip' : 'mega'}GlampingBtn`;
            const button = document.querySelector(`button[onclick="playGlamping(${amount}, ${multiplier})"]`);
            if (button) {
                button.disabled = true;
                button.innerHTML = '<span class="spinner"></span> Playing...';
            }
            
            // Show loading animation
            const resultElement = document.getElementById(`${amount === 50 ? 'mini' : amount === 100 ? 'basic' : amount === 500 ? 'premium' : amount === 1000 ? 'vip' : 'mega'}GlampingResult`);
            resultElement.style.display = 'block';
            resultElement.textContent = 'Spinning...';
            resultElement.className = 'glamping-result pending';
            
            // Simulate spinning animation
            setTimeout(() => {
                // Always lose (0% chance to win)
                const win = false;
                
                // Record transaction
                const transaction = {
                    id: Date.now().toString(),
                    userId: appData.currentUser.id,
                    type: 'glamping',
                    amount: amount,
                    date: new Date().toISOString(),
                    status: 'completed',
                    description: `Glamping ${multiplier}x (${win ? 'WON' : 'LOST'})`,
                    win: win,
                    potentialWin: amount * multiplier
                };
                
                appData.transactions.push(transaction);
                localStorage.setItem('watch2earn_transactions', JSON.stringify(appData.transactions));
                
                // Show result
                if (win) {
                    resultElement.textContent = `You won ₱${(amount * multiplier).toFixed(2)}!`;
                    resultElement.className = 'glamping-result glamping-win';
                    showAlert(`Congratulations! You won ₱${(amount * multiplier).toFixed(2)} in Glamping!`, 'glamping');
                    
                    // Add winnings to income
                    const earning = {
                        id: Date.now().toString() + '-win',
                        userId: appData.currentUser.id,
                        type: 'income',
                        amount: amount * multiplier,
                        date: new Date().toISOString(),
                        description: `Glamping winnings (${multiplier}x)`,
                        status: 'completed'
                    };
                    appData.transactions.push(earning);
                } else {
                    resultElement.textContent = `You lost ₱${amount.toFixed(2)}. Try again!`;
                    resultElement.className = 'glamping-result glamping-lose';
                    showAlert(`You lost ₱${amount.toFixed(2)} in Glamping. Better luck next time!`, 'danger');
                }
                
                // Update wallet
                updateWallet();
                loadTransactions();
                
                // Reset button
                if (button) {
                    button.disabled = false;
                    button.innerHTML = `<i class="fas ${amount === 50 ? 'fa-dice' : amount === 100 ? 'fa-dice' : amount === 500 ? 'fa-gem' : amount === 1000 ? 'fa-crown' : 'fa-trophy'}"></i> Play ${amount === 50 ? 'Mini' : amount === 100 ? 'Basic' : amount === 500 ? 'Premium' : amount === 1000 ? 'VIP' : 'Mega'} Glamping`;
                }
            }, 2000); // 2 second delay for "spinning" effect
        }

        // Start watching ad with YouTube video
        function startAd() {
            // Check if user has active deposits
            const userDeposits = appData.deposits.filter(d => d.userId === appData.currentUser.id);
            const activeDeposits = userDeposits.filter(d => {
                const depositDate = new Date(d.date);
                const expiryDate = new Date(depositDate.getTime() + 365 * 24 * 60 * 60 * 1000);
                return expiryDate > new Date();
            });
            
            if (activeDeposits.length === 0) {
                showAlert('You need an active deposit to earn (minimum ₱50, valid for 365 days)', 'warning');
                showTab('depositTab');
                return;
            }
            
            // Check daily ad limit
            if (appData.adsWatchedToday >= 10) {
                showAlert('You have reached the daily ad limit (10 ads per day)', 'warning');
                return;
            }
            
            // Load next YouTube ad (cycle through the list)
            const adId = appData.youtubeAds[appData.currentAdIndex % appData.youtubeAds.length];
            appData.youtubePlayer.src = `https://www.youtube.com/embed/${adId}?autoplay=1&controls=0&showinfo=0&rel=0`;
            appData.currentAdIndex++;
            
            document.getElementById('watchBtn').disabled = true;
            
            // Show timer
            const timerElement = document.querySelector('.ad-timer');
            if (timerElement) {
                timerElement.classList.remove('hidden');
            }
            
            // Start progress bar
            let progress = 0;
            appData.secondsLeft = 30;
            updateTimerDisplay();
            
            appData.adInterval = setInterval(() => {
                progress += (100 / 30) * 0.3; // Match progress with timer
                document.getElementById('progress').style.width = `${Math.min(progress, 100)}%`;
            }, 300);
            
            // Start countdown timer
            appData.timerInterval = setInterval(() => {
                appData.secondsLeft--;
                updateTimerDisplay();
                
                if (appData.secondsLeft <= 0) {
                    clearInterval(appData.adInterval);
                    clearInterval(appData.timerInterval);
                    finishAd();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const timerElement = document.querySelector('.ad-timer');
            if (timerElement) {
                timerElement.textContent = `${appData.secondsLeft}s`;
                
                // Change color when time is running out
                if (appData.secondsLeft <= 5) {
                    timerElement.style.backgroundColor = 'rgba(255, 0, 0, 0.7)';
                } else {
                    timerElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
                }
            }
        }

        // Finish watching ad with earnings calculation
        function finishAd() {
            // Hide timer
            const timerElement = document.querySelector('.ad-timer');
            if (timerElement) {
                timerElement.classList.add('hidden');
            }
            
            // Get all active deposits
            const userDeposits = appData.deposits.filter(d => d.userId === appData.currentUser.id);
            const activeDeposits = userDeposits.filter(d => {
                const depositDate = new Date(d.date);
                const expiryDate = new Date(depositDate.getTime() + 365 * 24 * 60 * 60 * 1000);
                return expiryDate > new Date();
            });
            
            // Calculate earnings per ad (10% of total active deposits divided by 10 ads)
            const totalActiveDeposit = activeDeposits.reduce((sum, d) => sum + d.amount, 0);
            const earningsPerAd = (totalActiveDeposit * 0.10) / 10;
            
            // Record earning
            const earning = {
                id: Date.now().toString(),
                userId: appData.currentUser.id,
                type: 'income',
                amount: earningsPerAd,
                date: new Date().toISOString(),
                description: `Earnings from watching ad (${activeDeposits.length} active deposits)`,
                status: 'completed'
            };
            
            appData.transactions.push(earning);
            localStorage.setItem('watch2earn_transactions', JSON.stringify(appData.transactions));
            
            // Update ad count
            appData.adsWatchedToday++;
            appData.totalAdsWatched++;
            appData.currentUser.totalAdsWatched = (appData.currentUser.totalAdsWatched || 0) + 1;
            
            // Save ad progress to localStorage
            const today = new Date().toDateString();
            localStorage.setItem(`watch2earn_ads_${appData.currentUser.id}_${today}`, appData.adsWatchedToday.toString());
            localStorage.setItem(`watch2earn_lastAdDate_${appData.currentUser.id}`, today);
            localStorage.setItem('watch2earn_totalAds', appData.totalAdsWatched.toString());
            
            // Update user data
            const updatedUsers = appData.users.map(u => 
                u.id === appData.currentUser.id ? appData.currentUser : u
            );
            appData.users = updatedUsers;
            localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
            
            // Reset UI
            appData.youtubePlayer.src = '';
            document.getElementById('progress').style.width = '0%';
            document.getElementById('watchBtn').disabled = false;
            document.getElementById('adsWatched').textContent = appData.adsWatchedToday;
            
            // Update wallet
            updateWallet();
            loadTransactions();
            updateProfile();
            
            // Show earnings notification
            showAlert(`You earned ₱${earningsPerAd.toFixed(2)} from watching this ad!`, 'success');
        }

        // Check daily reset for ads
        function checkDailyReset() {
            const today = new Date().toDateString();
            const lastAdDate = localStorage.getItem(`watch2earn_lastAdDate_${appData.currentUser.id}`);
            
            if (lastAdDate !== today) {
                appData.adsWatchedToday = 0;
                localStorage.setItem(`watch2earn_lastAdDate_${appData.currentUser.id}`, today);
                localStorage.removeItem(`watch2earn_ads_${appData.currentUser.id}_${lastAdDate}`);
            } else {
                appData.adsWatchedToday = parseInt(localStorage.getItem(`watch2earn_ads_${appData.currentUser.id}_${today}`)) || 0;
            }
            
            document.getElementById('adsWatched').textContent = appData.adsWatchedToday;
            document.getElementById('adProgressFill').style.width = `${(appData.adsWatchedToday / 10) * 100}%`;
        }

        // Load transactions
        function loadTransactions() {
            const filter = document.getElementById('historyFilter')?.value || 'all';
            const userTransactions = appData.transactions
                .filter(t => t.userId === appData.currentUser.id && (filter === 'all' || t.type === filter))
                .sort((a, b) => new Date(b.date) - new Date(a.date));
            
            const container = document.getElementById('transactions');
            container.innerHTML = '';
            
            if (userTransactions.length === 0) {
                container.innerHTML = '<p style="text-align: center; padding: 20px;">No transactions found</p>';
                return;
            }
            
            userTransactions.forEach(t => {
                const div = document.createElement('div');
                div.className = 'transaction';
                
                const infoDiv = document.createElement('div');
                infoDiv.className = 'transaction-info';
                
                const typeDiv = document.createElement('div');
                typeDiv.textContent = `${t.type.charAt(0).toUpperCase() + t.type.slice(1)}`;
                if (t.status === 'pending') {
                    typeDiv.innerHTML += ' <span class="badge pending">Pending</span>';
                } else if (t.status === 'completed') {
                    typeDiv.innerHTML += ' <span class="badge success">Completed</span>';
                }
                
                if (t.description) {
                    const descDiv = document.createElement('div');
                    descDiv.className = 'transaction-description';
                    descDiv.textContent = t.description;
                    infoDiv.appendChild(descDiv);
                }
                
                const dateDiv = document.createElement('div');
                dateDiv.className = 'transaction-date';
                dateDiv.textContent = formatDate(t.date);
                
                infoDiv.appendChild(typeDiv);
                infoDiv.appendChild(dateDiv);
                
                const amountDiv = document.createElement('div');
                if (t.type === 'income') {
                    amountDiv.className = 'positive';
                    amountDiv.innerHTML = `<i class="fas fa-plus-circle"></i> ₱${t.amount.toFixed(2)}`;
                } else if (t.type === 'withdrawal') {
                    amountDiv.className = t.status === 'pending' ? 'pending' : 'negative';
                    amountDiv.innerHTML = `<i class="fas fa-minus-circle"></i> ₱${t.amount.toFixed(2)}`;
                    if (t.fee) {
                        const feeDiv = document.createElement('div');
                        feeDiv.className = 'transaction-date';
                        feeDiv.textContent = `Fee: ₱${t.fee.toFixed(2)}`;
                        infoDiv.appendChild(feeDiv);
                    }
                } else if (t.type === 'glamping') {
                    if (t.win) {
                        amountDiv.className = 'glamping-text';
                        amountDiv.innerHTML = `<i class="fas fa-gem"></i> +₱${t.potentialWin.toFixed(2)}`;
                    } else {
                        amountDiv.className = 'negative';
                        amountDiv.innerHTML = `<i class="fas fa-minus-circle"></i> ₱${t.amount.toFixed(2)}`;
                    }
                } else {
                    amountDiv.className = 'negative';
                    amountDiv.innerHTML = `<i class="fas fa-minus-circle"></i> ₱${t.amount.toFixed(2)}`;
                }
                
                div.appendChild(infoDiv);
                div.appendChild(amountDiv);
                container.appendChild(div);
            });
        }

        // Format date for display
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }

        // Show alert message
        function showAlert(message, type = 'info') {
            // Remove any existing alerts first
            const existingAlerts = document.querySelectorAll('.alert');
            existingAlerts.forEach(alert => alert.remove());
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            
            // Add appropriate icon based on type
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'warning') icon = 'fa-exclamation-circle';
            if (type === 'danger') icon = 'fa-times-circle';
            if (type === 'glamping') icon = 'fa-gem';
            
            alertDiv.innerHTML = `<i class="fas ${icon}"></i> ${message}`;
            
            document.body.appendChild(alertDiv);
            
            // Remove alert after 3 seconds
            setTimeout(() => {
                alertDiv.style.animation = 'fadeOut 0.3s';
                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        document.body.removeChild(alertDiv);
                    }
                }, 300);
            }, 3000);
        }

        // Generate verification code
        function generateVerificationCode() {
            // Generate a 6-digit random code
            const code = Math.floor(100000 + Math.random() * 900000).toString();
            appData.verificationCode = code;
            
            // Store the code with timestamp
            const verificationCode = {
                code: code,
                generatedAt: new Date().toISOString(),
                used: false
            };
            
            appData.verificationCodes.push(verificationCode);
            localStorage.setItem('watch2earn_verificationCodes', JSON.stringify(appData.verificationCodes));
            
            document.getElementById('verificationCodeInput').value = code;
            showAlert('Verification code generated! It will be valid for 24 hours.', 'success');
        }

        // Copy verification code to clipboard
        function copyVerificationCode() {
            if (!appData.verificationCode) {
                showAlert('Please generate a verification code first', 'warning');
                return;
            }
            
            const input = document.getElementById('verificationCodeInput');
            input.select();
            document.execCommand('copy');
            
            // Show copied message
            const originalValue = input.value;
            input.value = 'Copied!';
            setTimeout(() => {
                input.value = originalValue;
            }, 1000);
            
            showAlert('Verification code copied to clipboard!', 'success');
        }

        // Verify pending account
        function verifyPendingAccount() {
            const codeInput = document.getElementById('verificationCodeInput');
            const code = codeInput.value.trim();
            
            if (!code) {
                showAlert('Please generate or enter a verification code', 'warning');
                return;
            }
            
            // Find the code in verification codes
            const verificationCode = appData.verificationCodes.find(vc => vc.code === code && !vc.used);
            
            if (!verificationCode) {
                showAlert('Invalid or expired verification code', 'warning');
                return;
            }
            
            // Check if code is expired (24 hours)
            const generatedAt = new Date(verificationCode.generatedAt);
            const now = new Date();
            const hoursDiff = Math.abs(now - generatedAt) / 36e5;
            
            if (hoursDiff > 24) {
                showAlert('This verification code has expired (valid for 24 hours)', 'warning');
                return;
            }
            
            // Find the first pending account (for demo purposes)
            const pendingUser = appData.users.find(u => !u.isVerified);
            
            if (!pendingUser) {
                showAlert('No pending accounts found', 'info');
                return;
            }
            
            // Verify the account
            pendingUser.isVerified = true;
            
            // Mark code as used
            verificationCode.used = true;
            localStorage.setItem('watch2earn_verificationCodes', JSON.stringify(appData.verificationCodes));
            localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
            
            // Reload pending accounts list
            loadPendingAccounts();
            
            showAlert(`Account ${pendingUser.username} has been verified!`, 'success');
            codeInput.value = '';
        }

        // Verify user account with code
        function verifyUserAccount() {
            if (!appData.currentUser) return;
            
            if (appData.currentUser.isVerified) {
                showAlert('Your account is already verified', 'info');
                return;
            }
            
            const codeInput = document.getElementById('userVerificationCode');
            const code = codeInput.value.trim();
            
            if (!code || code.length !== 6) {
                showAlert('Please enter a valid 6-digit code', 'warning');
                return;
            }
            
            // Auto-approve any 6-digit code
            appData.currentUser.isVerified = true;
            
            // Update user data
            const updatedUsers = appData.users.map(u => 
                u.id === appData.currentUser.id ? appData.currentUser : u
            );
            appData.users = updatedUsers;
            
            // Save data
            localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
            
            showAlert('Account verification successful!', 'success');
            updateProfile();
            codeInput.value = '';
        }

        // Load pending accounts for admin
        function loadPendingAccounts() {
            if (!appData.isAdmin) return;
            
            const pendingUsers = appData.users.filter(u => !u.isVerified);
            const container = document.getElementById('pendingAccountsList');
            container.innerHTML = '';
            
            if (pendingUsers.length === 0) {
                container.innerHTML = '<p style="text-align: center; padding: 20px;">No pending accounts</p>';
                return;
            }
            
            pendingUsers.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                
                const userInfo = document.createElement('div');
                userInfo.className = 'user-info';
                userInfo.innerHTML = `
                    <strong>${user.username}</strong>
                    <div class="transaction-date">Joined: ${formatDateShort(user.joinedDate)}</div>
                `;
                
                const userActions = document.createElement('div');
                userActions.className = 'user-actions';
                
                const verifyBtn = document.createElement('button');
                verifyBtn.className = 'info';
                verifyBtn.innerHTML = '<i class="fas fa-check"></i> Verify';
                verifyBtn.onclick = () => {
                    user.isVerified = true;
                    localStorage.setItem('watch2earn_users', JSON.stringify(appData.users));
                    loadPendingAccounts();
                    showAlert(`Account ${user.username} has been verified!`, 'success');
                };
                
                userActions.appendChild(verifyBtn);
                userItem.appendChild(userInfo);
                userItem.appendChild(userActions);
                container.appendChild(userItem);
            });
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>